import tkinter as tk
from math import log10

def calculer_rapport():
    try:
        tfrs = float(entry_tfrs.get())
        ferritine = float(entry_ferritine.get())

        if ferritine <= 0:
            resultat.set("La ferritine doit être supérieure à 0.")
            return

        rapport = tfrs / log10(ferritine)
        resultat.set(f"Le rapport TfRs/log(ferritine) est : {rapport:.2f}\n\n"
                     "Un rapport <1 en présence d'une maladie chronique est en faveur d'une anémie inflammatoire. "
                     "Un rapport <1 est en faveur d'une carence martiale.")
    except ValueError:
        resultat.set("Veuillez entrer des valeurs numériques valides.")

# Création de la fenêtre principale
fenetre = tk.Tk()
fenetre.title("Calculateur TfRs/log(ferritine)")

# Sous-titre
sous_titre = tk.Label(fenetre, text="Vous voulez estimer la probabilité de carence martiale ou d'anémie inflammatoire en cas d'anémie avec FS bas et d'inflammation. "
                                    "Vous devez avoir à votre disposition le taux de TfRs en mg/L et de ferritine en µg/L.")
sous_titre.pack(pady=10, padx=10)

# Création des widgets
frame_tfrs = tk.Frame(fenetre)
frame_tfrs.pack(pady=5)

label_tfrs = tk.Label(frame_tfrs, text="TfRs")
label_tfrs.pack(side=tk.LEFT, padx=5)

entry_tfrs = tk.Entry(frame_tfrs)
entry_tfrs.pack(side=tk.LEFT, padx=5)

label_tfrs_unit = tk.Label(frame_tfrs, text="mg/L")
label_tfrs_unit.pack(side=tk.LEFT, padx=5)

frame_ferritine = tk.Frame(fenetre)
frame_ferritine.pack(pady=5)

label_ferritine = tk.Label(frame_ferritine, text="Ferritine")
label_ferritine.pack(side=tk.LEFT, padx=5)

entry_ferritine = tk.Entry(frame_ferritine)
entry_ferritine.pack(side=tk.LEFT, padx=5)

label_ferritine_unit = tk.Label(frame_ferritine, text="µg/L")
label_ferritine_unit.pack(side=tk.LEFT, padx=5)

bouton_calculer = tk.Button(fenetre, text="Calculer", command=calculer_rapport)
bouton_calculer.pack(pady=20)

resultat = tk.StringVar()
label_resultat = tk.Label(fenetre, textvariable=resultat, wraplength=300, justify="left")
label_resultat.pack(pady=20)

# Lancement de la boucle principale
fenetre.mainloop()
